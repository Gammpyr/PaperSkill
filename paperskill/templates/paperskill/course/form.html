{% extends 'paperskill/base.html' %}
{% load static %}

{% block title %}{{ action_title|default:"Создание курса" }} — PaperSkill{% endblock %}

{% block content %}
<div class="container py-5">
	<div class="row justify-content-center">
		<div class="col-lg-8">
			<div class="card border-0 shadow-sm">
				<div class="card-body p-5">
					<div class="text-center mb-4">
						<div class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3"
							 style="width: 60px; height: 60px;">
							<i class="bi bi-book-fill text-primary fs-2"></i>
						</div>
						<h2 class="fw-bold">{{ action_title|default:"Создание курса" }}</h2>
					</div>

					<form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
						{% csrf_token %}

						{% if form.non_field_errors %}
						<div class="alert alert-danger mb-4">
							{{ form.non_field_errors }}
						</div>
						{% endif %}

						<div class="mb-3">
							<label for="{{ form.name.id_for_label }}" class="form-label">Название курса *</label>
							{{ form.name }}
							{% if form.name.errors %}
							<div class="text-danger mt-1">{{ form.name.errors }}</div>
							{% endif %}
						</div>
						<div class="mb-3">
							<label for="{{ form.category.id_for_label }}" class="form-label">Категория *</label>
							{{ form.category }}
							{% if form.category.errors %}
							<div class="text-danger mt-1">{{ form.category.errors }}</div>
							{% endif %}
						</div>
						<div class="mb-3">
							<label for="{{ form.description.id_for_label }}" class="form-label">Описание курса</label>
							{{ form.description }}
							{% if form.description.errors %}
							<div class="text-danger mt-1">{{ form.description.errors }}</div>
							{% endif %}
						</div>

						<div class="mb-3">
							<label for="{{ form.image.id_for_label }}" class="form-label">Превью изображение</label>
							{{ form.image }}
							{% if form.image.errors %}
							<div class="text-danger mt-1">{{ form.image.errors }}</div>
							{% endif %}
						</div>

						<div class="mb-3">
							<label for="{{ form.video_url.id_for_label }}" class="form-label">Ссылка на видео
								(опционально)</label>
							{{ form.video_url }}
							{% if form.video_url.errors %}
							<div class="text-danger mt-1">{{ form.video_url.errors }}</div>
							{% endif %}
						</div>

						<div class="mb-4 form-check">
							{{ form.is_paid }}
							<label for="{{ form.is_paid.id_for_label }}" class="form-check-label">Платный курс</label>
							{% if form.is_paid.errors %}
							<div class="text-danger mt-1">{{ form.is_paid.errors }}</div>
							{% endif %}
						</div>

						<div class="mb-3" id="price-field">
							<label for="{{ form.price.id_for_label }}" class="form-label">Цена (руб)</label>
							{{ form.price }}
							{% if form.price.errors %}
							<div class="text-danger mt-1">{{ form.price.errors }}</div>
							{% endif %}
						</div>

						<div class="d-flex flex-column flex-sm-row gap-3">
							<button type="submit" class="btn btn-primary flex-grow-1">Сохранить курс</button>

							{% if course.pk %}
							<a href="{% url 'paperskill:course_detail' course.pk %}"
							   class="btn btn-outline-secondary flex-grow-1">Отмена</a>
							{% else %}
							<a href="{% url 'paperskill:courses_list' %}" class="btn btn-outline-secondary flex-grow-1">Отмена</a>
							{% endif %}
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}

